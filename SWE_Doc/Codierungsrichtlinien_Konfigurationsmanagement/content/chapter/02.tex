%!TEX root = ../../main.tex

\chapter{Codierungsrichtlinien}\label{sec:Chap2}
In diesem Abschnitt sind die wichtigsten Codierungsrichtlinien, die im Projekt gelten, zusammengefasst. Es handelt sich dabei um eine Auswahl der wichtigsten und am häufigsten vorkommenden Situationen.

Das Projektteam befolgt die gängigen Codierungsrichtlinen für die jeweiligen Programmiersprachen. 

Damit für die am häufigsten auftretenden Situationen nicht immer der geltende Standard gelesen werden muss, sind an dieser Stelle die wichtigsten Informationen zusammengefasst. 

Im jeweiligen Unterkapitel der Programmiersprache wird auch nochmals explizit auf den verwendeten Standard verwiesen.

Wie auch in allen hier verwendeten Standards wird Wert auf die Lesbarkeit des Codes gelegt.\\
Wirkt also eine Regel an einer bestimmten Stelle der Lesbarkeit des Codes entgegen, so wird immer die Lesbarkeit des Codes bevorzugt gegenüber der Befolgung der Regel.\\
Um ein Beispiel für eine solche Situation zu nennen:
Dateinamen sollen nach Richtlinie immer im snake\_case geschrieben sein. Allerdings repräsentiert eine Datei einen bestimmten Eigennamen. Hier wird dann bevorzugt, den Eigennamen korrekt zu verwenden, als ihn an die Richtlinie anzupassen.
\section{Allgemein}
Vorab einige allgemeine Richtlinien, auf die sich das Projektteam geeinigt hat.
\begin{itemize}
\item Dateinamen werden im snake\_case geschrieben (Bsp.: das\_ist\_snake\_case)
\item Jede Datei erhält einen Dateiheader, in dem die Inhalte der Datei kurz zusammengefasst werden
\item Der Programmcode wird auf Englisch geschrieben. Von dieser Regel sind alle Inhalte, die für den Nutzer der Software sichtbar sind, ausgenommen.
\item Dateien werden mit UTF-8 codiert
\end{itemize}

\section{Python}
Für die Programmiersprache Python wird die Codierungsrichtlinie PEP 8 verwendet. Eine ausführliche Version der Richtlinie findet sich \href{https://pep8.org/}{hier}. \\

\textbf{Einrückung}\\
Für die Einrückung werden 4 Leerzeichen verwendet, keine Tabs.\\
Weitergeführte Zeilen werden ebenfalls durch Einrückung oder durch Klammern gekennzeichnet \\
\begin{lstlisting}[language = Python, caption = Weitergeführte Zeilen gekennzeichnet durch Einrückungen, label = lst:Einrückungen]
foo = long_function_name(var_one, var_two,
						 var_three, var_four)

def long_function_name(
		var_one, var_two, var_three,
		var_four):
	print(var_one)
\end{lstlisting}

Werden weitergeführte Zeilen durch Klammern gekennzeichnet, kann die schließende Klammer entweder unter dem ersten Zeichen der letzten Zeile stehen oder unter dem ersten Zeichen der Zeile, in der das Konstrukt begonnen wurde.\\
\begin{lstlisting}[language = Python, caption = Weitergeführte Zeilen gekennzeichnet durch Klammern, label = lst:klammern]
result = some_function_that_takes_arguments(
	'a', 'b', 'c',
	'd', 'e', 'f'
	)

my_list = [
	1, 2, 3,
	4, 5, 6,
]
\end{lstlisting}

\textbf{Maximale Zeilenlänge}\\
Die maximale Zeilenlänge für Programmcode beträgt 79 Zeichen. \\
Davon ausgenommen sind Kommentare, für diese wird die maximale Zeilenlänge auf 72 Zeichen begrenzt.\\ \\

\textbf{Zeilenumbrüche bei binären Operatoren}\\
Zeilenumbrüche werden vor den binären Operatoren ausgeführt.
\begin{lstlisting}[language = Python, caption = Zeilenumbrüche bei binären Operatoren, label = lst:zeilenumbruch]
income = (gross_wages
			+ taxable_interest
			+ (dividends - quaified_dividends)
			- ira_deduction
			- student_loan_interest)
\end{lstlisting}

\textbf{Leerzeilen}\\
Funktionen und Klassendefinitionen werden durch zwei Leerzeilen eingerahmt.\\
Methoden in Klassen werden durch eine Leerzeile umschlossen.\\
Durch eine Leerzeile können außerdem Funktionen gruppiert werden und logische Abschnitte in Funktionen gekennzeichnet werden.

\textbf{Imports}\\
Jeder import-Befehl wird in eine separate Zeile geschrieben.\\
import-Befehle stehen in den Dateien immer auf der höchsten Ebene, direkt unter Modulkommentaren und Docstrings.
\begin{tabbing}
import-\= Befehle sind gruppiert nach folgender Reihenfolge:\\
\> 1. Standard-Bibliotheken \\
\> 2. verwandte Bibliotheken \\
\> 3. lokale Applikationen und Bibliotheken\\
\end{tabbing}
Jede dieser Gruppen wird durch eine Leerzeile von den anderen separiert.\\
Es werden wenn immer mögliche absolute imports verwendet. 
\begin{lstlisting}[language = Python, caption = absolute imports, label = lst:imports]
# absoluter Import
import mypkg.sibling
from mypkg import sibling
from mypkg.sibling import example

# relativer Import
from . import sibling
from .sibling import example
\end{lstlisting}

\textbf{Anführungszeichen für Strings}\\
Für Strings werden einfach Anführungszeichen verwendet.\\
Innerhalb des Strings werden dann doppelte Anführungszeichen verwendet.\\
Innerhalb von Strings mit drei Anführungszeichen werden doppelte Anführungszeichen verwendet.\\

\textbf{Leerzeichen}\\
Nachlaufende Leerzeichen sollten vermieden werden.\\
Operatoren werden mit einem Leerzeichen auf jeder Seite umschlossen.\\
In verschiedenen Situationen sollen zusätzliche Leerzeichen vermieden werden:
\begin{lstlisting}[language = Python, caption = Situationen in denen zusätzliche Leerzeichen vermieden werden sollten, label = lst:leerzeichen]
# innerhalb von Klammern
	# Falsch
		spam( ham[ 1 ], { eggs: 2 } )
	# Richtig
		spam(ham[1], {eggs:2})

# zwischen nachlaufenden Kommas und der folgenden schliessenden Klammer
	# Falsch
		foo = (0, )
	# Richtig
		foo = (0,)

# direkt vor einem Komma, Semikolon, Doppelpunkt
	# Falsch
		if x == 4 : print x , y ; x , y = y , x
	# Richtig
		if x == 4: print x, y; x, y = y, x

# vor oeffnenden Klammern der Argumentenliste eines Funktionsaufrufs
	# Falsch
		spam (1)
	# Richtig
		spam(1)

# vor oeffnenden Klammern, die eine Indizierung oder eine Zuordnung starten
	# Falsch
		dct ['key'] = lst [index]
	# Richtig
		dct['key'] = lst[index]
		
# mehr als ein Leerzeichen um einen Operator
	# Falsch
		x			  = 1
		y			  = 2
		long_variable = 3
	# Richtig
		x = 1
		y = 2
		long_variable = 3

# bei Zuweisungen von default-Parametern oder bei Schluesselwort-Argumenten
	# Falsch
		def complex(real, img = 0.0):
			return magic(r = real, i = img)
	# Richtig
		def complex(real, img=0.0):
			return magic(r=real, i=img)
\end{lstlisting}

\textbf{Kommentare}\\
Kommentare müssen auf dem gleichen Stand sein, wie der Code, den sie beschreiben.\\
Kommentare sollten ganze Sätze sein. Das bedeutet, sie enden mit einem Punkt und starten mit einem Großbuchstaben, außer der erste Buchstabe ist ein Bezeichner, der mit einem Kleinbuchstaben anfängt. \\
Kommentare werden in englischer Sprache verfasst.

\textit{Blockkommentare} gehören zu dem Code (bzw. einem Teil davon) der danach folgt. Sie sind genauso weit eingerückt wie der Code den sie beschreiben. Sie starten mit einem \# und einem darauf folgenden Leerzeichen.

\textit{Inline Kommentare} stehen in der selben Zeile wie ein Code-Statement. Sie sollten sparsam eingesetzt werden und werden weggelassen, wenn sie das offensichtliche Erklären. Sie sind mindestens ein Leerzeichen vom Code den sie beschreiben entfernt und beginnen mit einem \# und einem darauf folgenden Leerzeichen. 

\textit{Documentation Strings} werden für alle sichtbaren Module, Funktionen, Klassen und Methoden erstellt. Sie sind nicht nötig für nicht-sichtbare Methoden. Diese sollten mit Blockkommentaren versehen werden. Documentation Strings beginnen mit drei Anführungszeichen und enden mit drei Anführungszeichen. Die schließenden Anführungszeichen stehen dabei in einer eigenen Zeile. Diese Regel gilt nicht für einzeilige Kommentare, bei diesen stehen die schließenden Anführungszeichen in der gleichen Zeile. \\
\begin{tabbing}
\textbf{Namenskonventionen}\\
Neben \= der Beachtung der nachfolgenden Regeln sollte als erster Buchstabe in den \\
Bezeichnern auf folgende Buchstaben verzichtet werden:\\
\> l (kleines L) \\
\> O (großes o)\\
\> I (großes I)
\end{tabbing}
\textit{Module} haben kurze Namen und sind im snake\_case geschrieben. \\
\textit{Klassen} haben Bezeichner die im CamelCase geschrieben sind.\\
\textit{Exceptions} sind Klassen und sollten \glqq Error\grqq\: als Suffix erhalten.\\
\textit {Funktionen} haben Bezeichner die im snake\_case geschrieben sind.\\
\textit{Methoden und Instanzvariablen} werden wie Funktionen behandelt.\\
\textit{Konstanten} werden für ein ganzes Modul definiert und sind in CONSTANT\_CASE geschrieben.\\

\textbf{Vererbung}\\
Ist eine Klasse auf Vererbung ausgelegt, sollten alle Methoden und Instanzvaraiblen nicht-öffentlich deklariert werden.\\
Öffentliche Attribute sollten keine führenden Unterstriche haben.\\
Sollten Attributsnamen mit reservierten Schlüsselworten kollidieren, soll ihnen ein nachlaufender Unterstrich angehängt werden.\\

\textbf{weitere Empfehlungen}\\
Vergleiche zu Singeltons (wie None) sollten mit is (bzw. is not) durchgeführt werden.\\
Bei Return-Statements sollte auf Konsistenz geachtet werden. Entweder geben alle Funktionsteile etwas zurück oder keiner. Soll ein Statement keinen Wert zurückgeben, sollte None als Rückgabewert verwendet werden.
\begin{lstlisting}[language = Python, caption = konsistente return-Statements, label = lst:return-Statements]
def foo(x):
	if x >= 0:
		return math.sqrt(x)
	else:
		return None
\end{lstlisting}

\section{HTML und CSS}
Die Codierungsrichtlinien von HTML und CSS die im Folgenden zusammengefasst sind, beziehen sich auf die Codierungsrichtlinien für HTML und CSS von Google. Die Gesamtheit der Codierungsrichtlinien findet sich unter \href{https://google.github.io/styleguide/htmlcssguide.html}{diesem Link}.

\subsection{Allgemein}
\textbf{Protokolle}\\
Es sollte immer das https-Protokoll verwendet werden. http ist nur in Ausnahmefällen erlaubt, wenn das Dokument nicht mit https erreicht werden kann.\\
Auf die strikte Beachtung dieser Regel wird in diesem Projekt verzichtet, da das Projekt auf die Entwicklung der Anwendung abzielt und nicht auf die Entwicklung der Infrastruktur.

\textbf{Einrückung}\\
Jedes Level wird mit 2 Leerzeichen eingerückt. Tabs sollten nicht verwendet werden.\\

\textbf{Groß- und Kleinschreibung}\\
Der Programmcode sollte mit Kleinbuchstaben geschrieben werden. Großbuchstaben werden nur in Strings verwendet, die im späteren Dokument ausgegeben werden.\\

\textbf{Nachlaufende Leerzeichen}\\
Nachlaufende Leerzeichen sollten immer vermieden werden.\\

\textbf{Dateicodierung}\\
Dateien werden mit UTF-8 codiert.
Die Codierung sollte in HTML Stylesheets und HTML-Dokumenten mit einem Metatag angegeben werden.\\
\begin{lstlisting}[language = HTML, caption = Metatag für die UTF-8 Codierung, label = utf-8]
<meta charset="utf-8">
\end{lstlisting}

\textbf{Kommentare}\\
Der Code sollte an den Stellen erklärt werden, an denen es nötig ist.\\
\begin{tabbing}
Kommentare \= sollten dann auftauchen, wenn sich der Leser folgende Fragen stellen könnte:\\
\> Was deckt der Code ab\\
\> Welchen Zweck hat der Code\\
\> Warum wurde diese Lösung verwendet
\end{tabbing}
Kommentare werden nach folgenden Richtlinien in den Code integriert:
\begin{lstlisting}[language = HTML, caption = Kommentare, label = comments]
{# Einzeiliger Kommentar #}

{% comment %}
  Mehrzeiliger
  Kommentar
{% endcomment %}
\end{lstlisting}

\textbf{Handlungspunkte}\\
Kann an einer Stelle der Code noch nicht vollständig geschrieben werden bzw. ist man an einer gewissen Stelle auf einen anderen Entwickler angewiesen, sollte die Stelle mit einem Todo markiert werden.\\
In diesem Todo sollte vermerkt sein, was noch zu tun ist und eventuell falls bekannt, wer es tun muss.\\
\begin{lstlisting}[language = HTML, caption = Kennzeichnung eines Handlungspunktes, label = todo]
{# TODO(john):revisit centering #}
<center>Test</center>
\end{lstlisting}
\subsection{HTML}

\textbf{Dokumententyp}\\
HTML-Dokuemente werden mit HTML 5 geschrieben.\\
Dies sollte durch den DOCTYPE im Dokumentekopf angezeigt werden.
\begin{lstlisting}[language = HTML, caption = Kennzeichnung des Dokumententyps, label = doctype]
<!DOCTYPE html>
\end{lstlisting}

\textbf{Alternativer Text für Medien}\\
Alle eingefügten Medien werden mit einem alternativen Text versehen. Von dieser Regel sind allerdings alle Bilder ausgenommen, die nur einen rein dekorativen Effekt erfüllen.
\begin{lstlisting}[language = HTML, caption = Alternativtext, label = alttext]
<!-- alternative text -->
<img src="spreadsheet.png" alt="Spreadsheet screenshot.">

<!-- no alternative text if it's only for decorative means -->
<img src="decorative.png" alt="">
\end{lstlisting}

\textbf{Trennung von Inhalten}\\
Strukturelle, gestalterische und verhaltensbasierte Inhalte sollten strikt voneinander getrennt sein.\\

\textbf{Generelle Formatierung}\\
Jeder Block, jede Liste und jedes Tabellenelement erhält eine eigene neue Zeile.\\
Alle Kindelemente werden im Vergleich zu ihren Elternelementen um eine Einheit eingerückt.
\begin{lstlisting}[language = HTML, caption = Generelle Formatierung von HTML Dokumenten, label = formatting]
<table>
  <thread>
  	<tr>
  	  <th scope="col">Income
  	  <th scope="col">Taxes
</table>
\end{lstlisting}

\textbf{Zeilenumbrüche}\\
Lange Zeilen sollte umgebrochen werden.\\
Die weitergeführte Zeile sollte um mindestens 4 Leerzeichen weiter eingerückt sein, als die Zeile die sie weiterführt.
\begin{lstlisting}[language = HTML, caption = Zeilenumbrüche, label = line-wrapping]
<md-progress-circular md-mode="indeterminate" class="md-accent"
	ng-show="ctrl.loading" md-diameters="35">
</md-progress-circular>
\end{lstlisting}

\textbf{Anführungszeichen}\\
Es sollten immer doppelte Anführungszeichen (\grqq \grqq) verwendet werden.\\

\subsection{CSS}
\textbf{ID- und Klassennamen}\\
Die Namen sollten immer den Sinn des Elements widerspiegeln. Dadurch sollten entweder bedeutende Namen oder generische Namen verwendet werden.\\ 
Außerdem sollten die Namen so kurz wie möglich und so lang als nötig sein.\\
Die Namen sollten zur besseren Lesbarkeit durch Bindestriche getrennt sein. \\
Es wird also dash-case verwendet.
\begin{lstlisting}[language = HTML, caption = ID- und Klassennamen, label = doctype]
#video-id {}
.ads-sample {}
\end{lstlisting}

\textbf{Typselektoren}\\
Qualifizierende ID- und Klassennamen sollten bei Typselektoren vermieden werden.\\ 
Ebenfalls sollte darauf verzichtet werden Elementbezeichner mit IDs oder Klassen zu vermischen.\\
\begin{lstlisting}[language = HTML, caption = Kennzeichnung von Typselektoren, label = type selectors]
/* Not recommended */
  u1#example {}
  div.error{}#

/* Recommended */
  #example {}
  .error {}
\end{lstlisting}

\textbf{Shorthand Properties}\\
Falls möglich sollte für alle Eigenschaften bei denen es möglich ist die Kurzschreibweise verwendet werden.

\begin{lstlisting}[language = HTML, caption = Shorthand Properties, label = short prop]
/* Not recommended */
  font-family: palatino, georgia, serif;
  dont-size: 100%
  line-height:1.6;

/* Recommended */
  font: 100%/1.6 palatino, georgia, serif;
\end{lstlisting}

\textbf{Verwendung von Nullen}\\
Nach einer Null als Größenangabe darf keine Einheit stehen, außer sie ist ausdrücklich verlangt.\\
Ebenfalls sollten keine führenden Nullen in Werten verwendet werden.
\begin{lstlisting}[language = HTML, caption = Verwendung von Nullen in Größenangaben, label = zeros]
flex: 0px; /* Here a unit is required */
margin: 0; /* The unit is not required */

font-size: .8em; /* No leading zero */
\end{lstlisting}

\textbf{Hexadezimale Notation}\\
Es sollten wann immer möglich alle hexadezimalen Angaben mit drei Zeichen anstatt mit den üblichen 6 Zeichen angegeben werden.\\
\begin{lstlisting}[language = HTML, caption = hexadezimale Angaben, label = hex]
color: #ebc;
\end{lstlisting}

\textbf{Deklarationsreihenfolge}\\
Alle Deklarationen sollten in alphabetischer Reihenfolge sortiert sein.\\
Weitere Suffixe, die auf eine Deklaration folgen, sollten ebenfalls in alphabetischer Reihenfolge an die Deklaration selbst folgen.
\begin{lstlisting}[language = HTML, caption = Sortierung von Deklarationen, label = decl]
background: fuchsia;
border: 1px solid;
-moz-border-radius: 4px;
-webkit-border-radius: 4px;
border-radius: 4px;
color: black;
text-align: center;
text-indent: 2em;
\end{lstlisting}

\textbf{Einrückung von Blockinhalten}\\
Blockinhalte werden um eine Einheit eingerückt.
\begin{lstlisting}[language = HTML, caption = Einrückung von Blockinhalten, label = block indent]
@media screen, projection {
  html {
    background : #fff;
    color: #444
   }
}		
\end{lstlisting}

\textbf{Anführungszeichen}\\
Im Gegensatz zu HTML werden bei CSS einfache Anführungszeichen (' ') verwendet.\\
In URI-Werten werden keine Anführungszeichen verwendet.\\

\textbf{Abschnittskommentare}\\
Abschnitte werden durch Kommentare gruppiert.
\begin{lstlisting}[language = HTML, caption = Einteilung einer CSS-Datei durch Abschnittskommentare, label = sec comments]
/* Header */

#adw-header {}

/* Footer */

#adw-footer {}

/* Gallery */

.adw-gallery {}
\end{lstlisting}

\textbf{weitere Gestaltungsrichtlinien}\\
Jede Zeile wird mit einem Semikolon beendet.\\
Zwischen einer Eigenschaft und dem dazugehörigen Wert wird nach dem Doppelpunkt ein Leerzeichen eingefügt.\\
Zwischen dem letzten Selektor und der darauf folgenden öffnenden Klammer des Deklarationsblock steht ein Leerzeichen. Die öffnende Klammer des Deklarationsblocks steht dabei in der selben Zeile wie die Selektoren.\\
Jeder Selektor bzw. jede Deklaration und von dem nächsten seiner Art durch eine neue Zeile getrennt. \\
Verschiedene Regeln wrden durch Leerzeilen voneinander getrennt
\begin{lstlisting}[language = HTML, caption = Beispiel für die weiteren Gestaltungsrichtlinien, label = guidelines]
h2,
h3 {
  font-weight: bold;
  line-height : 1.2;
}

html {
  background: #fff;
}
\end{lstlisting}













